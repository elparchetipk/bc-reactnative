# 03. Tab Navigator y Drawer Navigator

> **Navegaci√≥n por pesta√±as y men√∫ lateral**  
> Crea interfaces profesionales con Bottom Tabs y Drawer para apps complejas.

**Duraci√≥n:** 2 horas (presencial)  
**Modalidad:** Teor√≠a + Demo + Pr√°ctica

---

## üéØ Objetivos

Al finalizar esta sesi√≥n, podr√°s:

- ‚úÖ Implementar Bottom Tab Navigator
- ‚úÖ Personalizar tabs con √≠conos y estilos
- ‚úÖ Configurar badges y notificaciones en tabs
- ‚úÖ Crear Drawer Navigator (men√∫ lateral)
- ‚úÖ Personalizar el contenido del Drawer
- ‚úÖ Combinar Stack + Tab + Drawer (navegaci√≥n anidada)
- ‚úÖ Gestionar navegaci√≥n entre diferentes navigators

---

## üì± Tab Navigator (Bottom Tabs)

### ¬øQu√© es?

Un **Tab Navigator** muestra pesta√±as en la parte inferior (iOS/Android) o superior de la pantalla.

**Casos de uso:**

- Secciones principales de la app (Home, Buscar, Perfil)
- Navegaci√≥n r√°pida entre vistas
- Acceso constante a funciones clave

**Ejemplos reales:**

- Instagram: Feed, Buscar, Reels, Tienda, Perfil
- Twitter: Inicio, Buscar, Notificaciones, Mensajes
- Spotify: Inicio, Buscar, Tu Biblioteca

---

### Instalaci√≥n

```bash
pnpm add @react-navigation/bottom-tabs
```

---

### Configuraci√≥n B√°sica

```typescript
// navigation/TabNavigator.tsx
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs'
import { HomeScreen } from '../screens/HomeScreen'
import { SearchScreen } from '../screens/SearchScreen'
import { ProfileScreen } from '../screens/ProfileScreen'

const Tab = createBottomTabNavigator()

export function TabNavigator() {
  return (
    <Tab.Navigator>
      <Tab.Screen name="Home" component={HomeScreen} />
      <Tab.Screen name="Search" component={SearchScreen} />
      <Tab.Screen name="Profile" component={ProfileScreen} />
    </Tab.Navigator>
  )
}
```

---

### Personalizar con √çconos

```typescript
import { Ionicons } from '@expo/vector-icons'

export function TabNavigator() {
  return (
    <Tab.Navigator
      screenOptions={({ route }) => ({
        tabBarIcon: ({ focused, color, size }) => {
          let iconName: keyof typeof Ionicons.glyphMap

          if (route.name === 'Home') {
            iconName = focused ? 'home' : 'home-outline'
          } else if (route.name === 'Search') {
            iconName = focused ? 'search' : 'search-outline'
          } else if (route.name === 'Profile') {
            iconName = focused ? 'person' : 'person-outline'
          }

          return <Ionicons name={iconName} size={size} color={color} />
        },
        tabBarActiveTintColor: '#3b82f6',
        tabBarInactiveTintColor: '#9ca3af',
      })}
    >
      <Tab.Screen name="Home" component={HomeScreen} />
      <Tab.Screen name="Search" component={SearchScreen} />
      <Tab.Screen name="Profile" component={ProfileScreen} />
    </Tab.Navigator>
  )
}
```

**Explicaci√≥n:**

- `tabBarIcon`: Funci√≥n que renderiza el √≠cono del tab
- `focused`: true cuando el tab est√° activo
- `color`: Color autom√°tico seg√∫n `tabBarActiveTintColor` o `tabBarInactiveTintColor`
- `size`: Tama√±o del √≠cono (default: 25)

---

### Estilos Personalizados

```typescript
<Tab.Navigator
  screenOptions={{
    // Estilos de la barra de tabs
    tabBarStyle: {
      backgroundColor: '#1f2937',
      borderTopWidth: 0,
      height: 60,
      paddingBottom: 8,
    },

    // Estilos del label
    tabBarLabelStyle: {
      fontSize: 12,
      fontWeight: '600',
    },

    // Colores
    tabBarActiveTintColor: '#60a5fa',
    tabBarInactiveTintColor: '#9ca3af',

    // Header
    headerStyle: {
      backgroundColor: '#1f2937',
    },
    headerTintColor: '#fff',
    headerTitleStyle: {
      fontWeight: 'bold',
    },
  }}
>
  {/* Screens */}
</Tab.Navigator>
```

---

### Badges (Notificaciones)

```typescript
<Tab.Screen
  name="Messages"
  component={MessagesScreen}
  options={{
    tabBarBadge: 3, // N√∫mero de notificaciones
    tabBarBadgeStyle: {
      backgroundColor: '#ef4444',
      color: '#fff',
    },
  }}
/>
```

**Badge Din√°mico:**

```typescript
export function TabNavigator() {
  const [messageCount, setMessageCount] = useState(5)

  return (
    <Tab.Navigator>
      <Tab.Screen
        name="Messages"
        component={MessagesScreen}
        options={{
          tabBarBadge: messageCount > 0 ? messageCount : undefined,
        }}
      />
    </Tab.Navigator>
  )
}
```

---

### Ocultar Tabs en Pantallas Espec√≠ficas

```typescript
// En el Screen que quieres ocultar los tabs:
<Tab.Screen
  name="Profile"
  component={ProfileScreen}
  options={({ route }) => ({
    tabBarStyle: { display: 'none' }, // Oculta la barra de tabs
  })}
/>
```

**O desde el componente:**

```typescript
function ProfileScreen({ navigation }) {
  useEffect(() => {
    navigation.setOptions({
      tabBarStyle: { display: 'none' }
    })

    return () => {
      navigation.setOptions({
        tabBarStyle: { display: 'flex' }
      })
    }
  }, [])

  return (
    // ... UI
  )
}
```

---

### Listener de Cambio de Tab

```typescript
function HomeScreen({ navigation }) {
  useEffect(() => {
    const unsubscribe = navigation.addListener('tabPress', (e) => {
      // Prevenir acci√≥n default
      // e.preventDefault()

      console.log('Tab Home presionado')

      // Recargar datos, scroll to top, etc.
    })

    return unsubscribe
  }, [navigation])

  return (
    // ... UI
  )
}
```

---

### TypeScript con Tab Navigator

```typescript
// types.ts
export type TabParamList = {
  Home: undefined
  Search: { query?: string }
  Profile: { userId: string }
}

// TabNavigator.tsx
const Tab = createBottomTabNavigator<TabParamList>()

// Uso en Screen
type HomeScreenProps = BottomTabScreenProps<TabParamList, 'Home'>

export function HomeScreen({ navigation }: HomeScreenProps) {
  navigation.navigate('Search', { query: 'react native' })
  // ‚úÖ Type-safe
}
```

---

## üóÇÔ∏è Drawer Navigator (Men√∫ Lateral)

### ¬øQu√© es?

Un **Drawer Navigator** muestra un men√∫ lateral deslizable desde el borde izquierdo (o derecho).

**Casos de uso:**

- Apps con muchas secciones (no caben en tabs)
- Configuraci√≥n y ajustes
- Navegaci√≥n secundaria
- Logout, About, Help

**Ejemplos reales:**

- Gmail: Inbox, Drafts, Sent, Trash
- Medium: Home, Bookmarks, Settings, Help
- Slack: Workspaces, Settings, Help

---

### Instalaci√≥n

```bash
pnpm add @react-navigation/drawer
pnpm add react-native-gesture-handler react-native-reanimated
```

**‚ö†Ô∏è IMPORTANTE:** Configurar `react-native-reanimated` en `babel.config.js`:

```javascript
module.exports = function (api) {
  api.cache(true)
  return {
    presets: ['babel-preset-expo'],
    plugins: [
      'nativewind/babel',
      'react-native-reanimated/plugin', // ‚Üê AL FINAL
    ],
  }
}
```

Despu√©s ejecutar:

```bash
pnpm start --clear
```

---

### Configuraci√≥n B√°sica

```typescript
// navigation/DrawerNavigator.tsx
import { createDrawerNavigator } from '@react-navigation/drawer'

const Drawer = createDrawerNavigator()

export function DrawerNavigator() {
  return (
    <Drawer.Navigator>
      <Drawer.Screen name="Home" component={HomeScreen} />
      <Drawer.Screen name="Settings" component={SettingsScreen} />
      <Drawer.Screen name="About" component={AboutScreen} />
    </Drawer.Navigator>
  )
}
```

---

### Personalizar con √çconos

```typescript
import { Ionicons } from '@expo/vector-icons'

export function DrawerNavigator() {
  return (
    <Drawer.Navigator
      screenOptions={{
        drawerActiveTintColor: '#3b82f6',
        drawerInactiveTintColor: '#6b7280',
      }}
    >
      <Drawer.Screen
        name="Home"
        component={HomeScreen}
        options={{
          drawerIcon: ({ color, size }) => (
            <Ionicons name="home" size={size} color={color} />
          ),
          drawerLabel: 'Inicio',
        }}
      />

      <Drawer.Screen
        name="Settings"
        component={SettingsScreen}
        options={{
          drawerIcon: ({ color, size }) => (
            <Ionicons name="settings" size={size} color={color} />
          ),
          drawerLabel: 'Configuraci√≥n',
        }}
      />

      <Drawer.Screen
        name="About"
        component={AboutScreen}
        options={{
          drawerIcon: ({ color, size }) => (
            <Ionicons name="information-circle" size={size} color={color} />
          ),
          drawerLabel: 'Acerca de',
        }}
      />
    </Drawer.Navigator>
  )
}
```

---

### Abrir/Cerrar Drawer Program√°ticamente

```typescript
function HomeScreen({ navigation }) {
  return (
    <View>
      <Button title="Abrir Men√∫" onPress={() => navigation.openDrawer()} />

      <Button title="Cerrar Men√∫" onPress={() => navigation.closeDrawer()} />

      <Button title="Toggle Men√∫" onPress={() => navigation.toggleDrawer()} />
    </View>
  )
}
```

---

### Drawer Personalizado (Custom Drawer Content)

```typescript
// components/CustomDrawer.tsx
import {
  DrawerContentScrollView,
  DrawerItemList,
  DrawerItem,
} from '@react-navigation/drawer'
import { View, Text, Image, TouchableOpacity } from 'react-native'

/**
 * CustomDrawer
 *
 * ¬øQu√© hace?
 * Reemplaza el contenido default del Drawer con UI personalizada
 *
 * ¬øPara qu√©?
 * Agregar header con avatar, secci√≥n de logout, footer, etc.
 */
export function CustomDrawer(props) {
  return (
    <DrawerContentScrollView {...props}>
      {/* Header con perfil */}
      <View className="p-4 border-b border-gray-200">
        <Image
          source={{ uri: 'https://via.placeholder.com/100' }}
          className="w-20 h-20 rounded-full mb-2"
        />
        <Text className="text-lg font-bold">John Doe</Text>
        <Text className="text-gray-600">john@example.com</Text>
      </View>

      {/* Items default del Drawer */}
      <DrawerItemList {...props} />

      {/* Items personalizados adicionales */}
      <DrawerItem
        label="Ayuda"
        icon={({ color, size }) => (
          <Ionicons name="help-circle" size={size} color={color} />
        )}
        onPress={() => console.log('Help pressed')}
      />

      <DrawerItem
        label="Cerrar Sesi√≥n"
        icon={({ color, size }) => (
          <Ionicons name="log-out" size={size} color={color} />
        )}
        onPress={() => {
          // L√≥gica de logout
          console.log('Logout')
        }}
        labelStyle={{ color: '#ef4444' }}
      />
    </DrawerContentScrollView>
  )
}

// Uso en DrawerNavigator:
;<Drawer.Navigator drawerContent={(props) => <CustomDrawer {...props} />}>
  {/* Screens */}
</Drawer.Navigator>
```

---

### Estilos del Drawer

```typescript
<Drawer.Navigator
  screenOptions={{
    drawerStyle: {
      backgroundColor: '#f3f4f6',
      width: 280,
    },
    drawerActiveTintColor: '#3b82f6',
    drawerInactiveTintColor: '#6b7280',
    drawerLabelStyle: {
      fontSize: 16,
      fontWeight: '500',
    },
    drawerItemStyle: {
      marginVertical: 4,
      borderRadius: 8,
    },
    headerStyle: {
      backgroundColor: '#1f2937',
    },
    headerTintColor: '#fff',
  }}
>
  {/* Screens */}
</Drawer.Navigator>
```

---

### Drawer desde la Derecha

```typescript
<Drawer.Navigator
  screenOptions={{
    drawerPosition: 'right', // Default: 'left'
  }}
>
  {/* Screens */}
</Drawer.Navigator>
```

---

## üîó Navegaci√≥n Anidada (Nested Navigation)

### ¬øPor Qu√© Anidar Navegadores?

Las apps reales combinan diferentes tipos de navegaci√≥n:

**Estructura t√≠pica:**

```
App
‚îî‚îÄ‚îÄ Drawer (men√∫ lateral global)
    ‚îî‚îÄ‚îÄ Tab (secciones principales)
        ‚îî‚îÄ‚îÄ Stack (navegaci√≥n dentro de cada tab)
```

**Ejemplo real (Instagram):**

```
Drawer Navigator (Ajustes, Guardados, etc.)
‚îî‚îÄ‚îÄ Tab Navigator (Feed, Buscar, Reels, Tienda, Perfil)
    ‚îî‚îÄ‚îÄ Stack Navigator en cada tab
        - Feed ‚Üí Post Detail ‚Üí Comments
        - Buscar ‚Üí User Profile ‚Üí User Posts
        - Perfil ‚Üí Edit Profile ‚Üí Change Password
```

---

### Ejemplo 1: Tab + Stack

```typescript
// Stack dentro de cada Tab

// navigation/HomeStack.tsx
const HomeStack = createNativeStackNavigator()

function HomeStackNavigator() {
  return (
    <HomeStack.Navigator>
      <HomeStack.Screen name="Feed" component={FeedScreen} />
      <HomeStack.Screen name="PostDetail" component={PostDetailScreen} />
      <HomeStack.Screen name="Comments" component={CommentsScreen} />
    </HomeStack.Navigator>
  )
}

// navigation/ProfileStack.tsx
const ProfileStack = createNativeStackNavigator()

function ProfileStackNavigator() {
  return (
    <ProfileStack.Navigator>
      <ProfileStack.Screen name="ProfileHome" component={ProfileHomeScreen} />
      <ProfileStack.Screen name="EditProfile" component={EditProfileScreen} />
      <ProfileStack.Screen name="Settings" component={SettingsScreen} />
    </ProfileStack.Navigator>
  )
}

// navigation/TabNavigator.tsx
const Tab = createBottomTabNavigator()

export function TabNavigator() {
  return (
    <Tab.Navigator>
      <Tab.Screen
        name="HomeTab"
        component={HomeStackNavigator} // ‚Üê Stack anidado
        options={{
          tabBarLabel: 'Inicio',
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="home" size={size} color={color} />
          ),
        }}
      />

      <Tab.Screen
        name="ProfileTab"
        component={ProfileStackNavigator} // ‚Üê Stack anidado
        options={{
          tabBarLabel: 'Perfil',
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="person" size={size} color={color} />
          ),
        }}
      />
    </Tab.Navigator>
  )
}
```

**Resultado:**

- En el tab "Inicio": Puedes navegar Feed ‚Üí PostDetail ‚Üí Comments
- En el tab "Perfil": Puedes navegar ProfileHome ‚Üí EditProfile ‚Üí Settings
- Los tabs siempre son visibles en la parte inferior
- Cada tab tiene su propio historial de navegaci√≥n

---

### Ejemplo 2: Drawer + Tab + Stack

```typescript
// Estructura completa: Drawer > Tab > Stack

// App.tsx
export default function App() {
  return (
    <NavigationContainer>
      <DrawerNavigator />
    </NavigationContainer>
  )
}

// navigation/DrawerNavigator.tsx
const Drawer = createDrawerNavigator()

export function DrawerNavigator() {
  return (
    <Drawer.Navigator>
      <Drawer.Screen
        name="Main"
        component={TabNavigator} // ‚Üê Tab Navigator anidado
        options={{
          drawerLabel: 'Inicio',
          title: 'Mi App',
        }}
      />

      <Drawer.Screen
        name="Settings"
        component={SettingsScreen}
        options={{
          drawerLabel: 'Configuraci√≥n',
        }}
      />

      <Drawer.Screen
        name="About"
        component={AboutScreen}
        options={{
          drawerLabel: 'Acerca de',
        }}
      />
    </Drawer.Navigator>
  )
}

// navigation/TabNavigator.tsx (ya definido arriba)
// Cada Tab tiene su Stack Navigator
```

**Resultado:**

- Drawer: Acceso global a Configuraci√≥n, About, etc.
- Tabs: Secciones principales (Home, Search, Profile)
- Stack: Navegaci√≥n dentro de cada tab

---

### Navegar entre Navegadores Anidados

```typescript
// Desde cualquier pantalla anidada, navegar al Drawer:
navigation.navigate('Main') // Drawer Screen name

// Navegar a un Tab espec√≠fico:
navigation.navigate('Main', {
  screen: 'ProfileTab', // Tab name
})

// Navegar a una pantalla dentro de un Stack dentro de un Tab:
navigation.navigate('Main', {
  screen: 'ProfileTab',
  params: {
    screen: 'EditProfile', // Stack Screen name
    params: { userId: '123' },
  },
})
```

**Ejemplo pr√°ctico:**

```typescript
// En SettingsScreen (Drawer), ir al EditProfile (Stack > Tab)
function SettingsScreen({ navigation }) {
  const handleEditProfile = () => {
    navigation.navigate('Main', {
      screen: 'ProfileTab',
      params: {
        screen: 'EditProfile',
        params: { userId: '123' },
      },
    })
  }

  return <Button title="Editar Perfil" onPress={handleEditProfile} />
}
```

---

### TypeScript con Navegaci√≥n Anidada

```typescript
// types.ts

// Drawer Param List
export type DrawerParamList = {
  Main: NavigatorScreenParams<TabParamList>
  Settings: undefined
  About: undefined
}

// Tab Param List
export type TabParamList = {
  HomeTab: NavigatorScreenParams<HomeStackParamList>
  ProfileTab: NavigatorScreenParams<ProfileStackParamList>
}

// Home Stack Param List
export type HomeStackParamList = {
  Feed: undefined
  PostDetail: { postId: number }
  Comments: { postId: number }
}

// Profile Stack Param List
export type ProfileStackParamList = {
  ProfileHome: undefined
  EditProfile: { userId: string }
  Settings: undefined
}
```

**Uso:**

```typescript
// En una pantalla del Stack
type EditProfileProps = NativeStackScreenProps<
  ProfileStackParamList,
  'EditProfile'
>

export function EditProfileScreen({ route, navigation }: EditProfileProps) {
  const { userId } = route.params // ‚úÖ Type-safe

  // Navegar al Drawer
  navigation.navigate('Settings') // ‚úÖ Autocompletado
}
```

---

## üí° Mejores Pr√°cticas

### 1. Organizaci√≥n de Archivos

```
src/
‚îú‚îÄ‚îÄ navigation/
‚îÇ   ‚îú‚îÄ‚îÄ types.ts                # Tipos de todos los navegadores
‚îÇ   ‚îú‚îÄ‚îÄ DrawerNavigator.tsx     # Drawer principal
‚îÇ   ‚îú‚îÄ‚îÄ TabNavigator.tsx        # Tab Navigator
‚îÇ   ‚îú‚îÄ‚îÄ stacks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HomeStack.tsx       # Stack del Home
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfileStack.tsx    # Stack del Perfil
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
```

### 2. Configuraci√≥n Centralizada

```typescript
// navigation/config.ts
export const COLORS = {
  primary: '#3b82f6',
  secondary: '#6b7280',
  background: '#f3f4f6',
  text: '#1f2937',
}

export const TAB_OPTIONS = {
  tabBarActiveTintColor: COLORS.primary,
  tabBarInactiveTintColor: COLORS.secondary,
  tabBarStyle: {
    height: 60,
    paddingBottom: 8,
  },
}

export const DRAWER_OPTIONS = {
  drawerActiveTintColor: COLORS.primary,
  drawerInactiveTintColor: COLORS.secondary,
}
```

### 3. Componentes Reutilizables

```typescript
// components/TabIcon.tsx
interface TabIconProps {
  name: keyof typeof Ionicons.glyphMap
  focused: boolean
  color: string
  size: number
}

export function TabIcon({ name, focused, color, size }: TabIconProps) {
  const iconName = focused ? name : `${name}-outline`
  return <Ionicons name={iconName} size={size} color={color} />
}

// Uso:
options={{
  tabBarIcon: ({ focused, color, size }) => (
    <TabIcon name="home" focused={focused} color={color} size={size} />
  ),
}}
```

---

## üö® Errores Comunes

### 1. Reanimated no configurado

‚ùå **Error:**

```
Reanimated 2 failed to create a worklet
```

‚úÖ **Soluci√≥n:**
Agregar `'react-native-reanimated/plugin'` como √∫ltimo plugin en `babel.config.js` y ejecutar `pnpm start --clear`.

### 2. Header duplicado

‚ùå **Problema:**
Al anidar navegadores, aparecen m√∫ltiples headers.

‚úÖ **Soluci√≥n:**

```typescript
<Tab.Screen
  name="HomeTab"
  component={HomeStackNavigator}
  options={{
    headerShown: false, // Oculta el header del Tab
  }}
/>
```

### 3. Tabs visibles en pantallas de Stack

‚ùå **Problema:**
Los tabs se ven en pantallas internas del Stack.

‚úÖ **Soluci√≥n:**

```typescript
// En el Stack Screen
<HomeStack.Screen
  name="PostDetail"
  component={PostDetailScreen}
  options={{
    tabBarStyle: { display: 'none' }, // Solo si es necesario
  }}
/>
```

---

## üíª Ejercicio Pr√°ctico: App de E-Commerce

**Objetivo:** Crear navegaci√≥n completa Drawer + Tab + Stack.

### Estructura:

```
Drawer
‚îú‚îÄ‚îÄ Main (Tab Navigator)
‚îÇ   ‚îú‚îÄ‚îÄ Home (Stack)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductList
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProductDetail
‚îÇ   ‚îú‚îÄ‚îÄ Cart (Stack)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CartList
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Checkout
‚îÇ   ‚îî‚îÄ‚îÄ Profile (Stack)
‚îÇ       ‚îú‚îÄ‚îÄ ProfileHome
‚îÇ       ‚îî‚îÄ‚îÄ EditProfile
‚îú‚îÄ‚îÄ Settings
‚îî‚îÄ‚îÄ Help
```

### Requisitos:

1. Drawer con 3 items (Main, Settings, Help)
2. Tab Navigator con 3 tabs (Home, Cart, Profile)
3. Cada tab tiene su Stack Navigator
4. Iconos en tabs y drawer
5. Badge en Cart tab (n√∫mero de items)
6. Custom Drawer Content con avatar
7. Navegar entre navegadores

**Tiempo:** 40 minutos  
**Trabajo:** En parejas

---

## üéØ Resumen

Hoy aprendiste:

‚úÖ Implementar Bottom Tab Navigator con √≠conos  
‚úÖ Personalizar tabs (estilos, badges, listeners)  
‚úÖ Crear Drawer Navigator con men√∫ lateral  
‚úÖ Custom Drawer Content con UI personalizada  
‚úÖ Navegaci√≥n anidada (Drawer + Tab + Stack)  
‚úÖ Navegar entre navegadores anidados  
‚úÖ TypeScript con navegaci√≥n compleja  
‚úÖ Mejores pr√°cticas y organizaci√≥n

---

_Tab & Drawer Navigator - Semana 2_  
_Bootcamp React Native 2025_
